# Story 1.3.4: Icon-Based Category Selection (No Text Labels)

**Epic:** 1.3 60-Second Report Submission Flow  
**Story Points:** 2  
**Sprint:** 1  
**Status:** Not Started

---

## User Story

**As a** user with potentially low literacy  
**I want** to select a category using ONLY icons  
**So that** I can report issues without needing to read labels

---

## Acceptance Criteria

- [ ] Display 2 category options (MVP scope):
  - üóëÔ∏è Waste/Litter - Hugeicons `Delete02` icon (32x32px)
  - üåä Drainage/Flood Risk - Hugeicons `Droplet` icon (32x32px)
- [ ] **NO text labels** - icon-only cards (enforced for low-literacy design)
- [ ] Large touch-friendly cards: 100x100px minimum
- [ ] Card structure:
  - Icon centered in card (32x32px)
  - Visual-only selection indicator
  - Selected: Green border (3px solid #059669) + green background (opacity 0.1)
  - Unselected: Gray border (1px solid #E5E7EB)
- [ ] Single selection (radio button behavior)
- [ ] Required field: cannot submit without selection
- [ ] Validation error: Red border + shake animation if not selected on submit
- [ ] Accessibility: Each card has `aria-label` for screen readers
- [ ] Keyboard navigable: Arrow keys to move between options, Enter to select

---

## Technical Implementation

### Components to Create

- `/components/report/CategorySelector.tsx`
- `/components/report/__tests__/CategorySelector.test.tsx`

### Code Structure

```typescript
'use client';
import { useState } from 'react';
import { Delete02, Droplet } from '@hugeicons/react';
import { cn } from '@/lib/utils';

type Category = 'waste' | 'drainage';

export function CategorySelector({ value, onChange, error }) {
  const categories = [
    { id: 'waste', icon: Delete02, label: 'Report waste or litter issue' },
    { id: 'drainage', icon: Droplet, label: 'Report drainage or flood risk issue' },
  ];

  return (
    <div className="flex gap-4">
      {categories.map((category) => (
        <button
          key={category.id}
          aria-label={category.label}
          className={cn(
            "flex items-center justify-center w-[100px] h-[100px] rounded-lg border transition-all",
            value === category.id
              ? "border-[3px] border-green-600 bg-green-50"
              : "border border-gray-200 hover:border-gray-300",
            error && !value && "border-red-500 animate-shake"
          )}
          onClick={() => onChange(category.id)}
        >
          <category.icon
            size={32}
            color={value === category.id ? "#059669" : "#6B7280"}
          />
        </button>
      ))}
    </div>
  );
}
```

---

## Tasks & Subtasks

### Task 1: Create CategorySelector Component

- [ ] Create `/components/report/CategorySelector.tsx` file
- [ ] Import Hugeicons: `Delete02`, `Droplet`
- [ ] Create category options array
- [ ] Set up component structure

### Task 2: Implement Icon-Only Cards

- [ ] Create button cards (100x100px minimum)
- [ ] Center icon (32x32px) in each card
- [ ] NO text labels (icon-only design)
- [ ] Add proper aria-label for accessibility

### Task 3: Implement Selection Logic

- [ ] Single selection (radio button behavior)
- [ ] onClick updates selected category
- [ ] Pass selected value to parent via onChange

### Task 4: Implement Visual Selection States

- [ ] Selected: Green border (3px solid #059669)
- [ ] Selected: Green background (bg-green-50, opacity 0.1)
- [ ] Unselected: Gray border (1px solid #E5E7EB)
- [ ] Hover: Border color change (gray-300)

### Task 5: Implement Validation

- [ ] Required field: Cannot submit without selection
- [ ] Error state: Red border if not selected on submit attempt
- [ ] Shake animation for validation error

### Task 6: Add Shake Animation

- [ ] Create shake keyframe animation
- [ ] Apply animation on validation error
- [ ] Duration: 400ms

```css
@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

.animate-shake {
  animation: shake 400ms ease-in-out;
}
```

### Task 7: Implement Keyboard Navigation

- [ ] Tab to focus category buttons
- [ ] Arrow keys to move between options
- [ ] Enter/Space to select
- [ ] Focus visible styling

### Task 8: State Management

- [ ] Store category in form state
- [ ] Validate category before submit
- [ ] Pass category to report creation

### Task 9: Testing

- [ ] Write unit tests for CategorySelector component
- [ ] Test selection logic
- [ ] Test keyboard navigation
- [ ] Test validation (required field)
- [ ] Test shake animation on error
- [ ] Test aria-label accessibility
- [ ] E2E test: Select category ‚Üí form valid

---

## Dependencies

- **Blocked by:** Story 1.3.1, Story 0.3 (Hugeicons installed) ‚úÖ
- **Blocks:** Story 1.3.6 (Report Submission)
- **Related:** Story 1.3.5 (Severity Selector - similar pattern)

---

## Definition of Done

- [x] All acceptance criteria met
- [x] Unit tests written and passing
- [x] NO text labels (icon-only design verified)
- [x] Touch targets 100x100px (exceeds 44px minimum)
- [x] Accessibility tested (keyboard + screen reader)
- [x] Shake animation working on validation error
- [x] Code reviewed and approved
- [x] Deployed to Vercel preview environment

---

## Notes

- **CRITICAL:** NO text labels (icon-only for low-literacy users)
- Audio tooltips deferred to Phase 2 (text-to-speech on tap)
- Each button MUST have `aria-label` for screen readers
- Only 2 categories in MVP: Waste/Litter, Drainage
- Additional categories (trees, air quality, etc.) in Phase 2
